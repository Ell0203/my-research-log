---
title: 🔍 조용한 매집 주식 스크리너 (Ultimate 3-Step) 개발
date: 2026-02-21
tags: [Python, yfinance, pykrx, FinanceDataReader, Google Sheets API, 스크리너, 퀀트]
---

텔레그램 시그널 봇처럼 **"조용한 세력 매집 종목"**을 완벽하게 필터링해 내는 파이프라인(Project: `05_stock_screener/screener_quiet.py`)의 아키텍처 정리입니다.

기존 순수 기술적 분석 위주의 스크리너 한계를 극복하고, 네이버 금융/한국거래소(KRX) 공식 수급 데이터를 다이렉트로 결합하여 노이즈를 획기적으로 줄였습니다.

<!-- more -->

## 🎯 1. 조용한 매집 (Quiet Accumulation) 탐지 조건

시장에서 소외된 척 횡보하고 있지만, 뒤에서는 거대 자본이 조용히 지분을 모으고 있는 종목(폭등 전야 패턴)을 찾아냅니다.

*   📅 **기간**: 최근 5일 (단기 박스권)
*   📈 **수익률**: `-5% ~ +10%` (크게 오르거나 내리지 않고 가격이 관리되는 상태)
*   〰️ **변동성**: `15% 이하` (5일간 최고가-최저가 / 시가 기준. 휩소나 급등락이 없는 상태)
*   💰 **실 투자금 컷**: 시가총액 최소 기준 적용 (코스피 1,000억 이상 / 코스닥 700억 이상)
*   🐋 **쌍끌이 수급 (핵심 로직)**: 4대 메이저 수급 주체(외국인, 기관, 연기금, 투신) 중 **최소 2개 이상의 주체**가 각각 5일 누적 **1억 원(100,000,000원) 이상** 순매수 중일 것. (로봇 단타 1~10주 매수 노이즈 원천 차단)

## ⚡ 2. 3단계 초고속 데이터 파이프라인 (The 3-Step Architecture)

수천 개의 틱/일봉/수급 데이터를 하나씩 조회하면 1시간이 넘게 걸리므로, 가장 빠르고 강력한 라이브러리 3개를 목적에 맞게 혼합 구성했습니다.

### 🪜 Step 1. 상장 종목 확보 및 잡주 커팅 (`FinanceDataReader`)
*   한국거래소 전 종목 리스트 맵핑.
*   시가총액 데이터를 기준으로 **코스피 1000억 / 코스닥 700억 미만의 소형주, 동전주를 1차로 모두 탈락**시킵니다. (약 2800개 -> 1300개로 컷)

### 🚀 Step 2. 차트/가격/변동성 고속 스크리닝 (`yfinance`)
*   `yfinance`의 강력한 `yf.download()` 병렬 처리(Batch) 기능을 이용하여 1차 통과한 1300여 개 종목 전체의 최근 1개월 치 차트 데이터(OHLC)를 **단 1분 만에** 통째로 내려받습니다.
*   여기서 초고속 연산을 통해 최근 5일 **수익률과 변동성** 조건을 검사합니다.
*   이 단계에서 대부분의 종목이 우수수 떨어져 나가고, 조용한 박스권 종목 소수만 살아남습니다.

### 🎯 Step 3. 한국거래소 원천 수급 데이터 정밀 타격 (`pykrx`)
*   2단계를 통과한 소수 정예 종목들만을 대상으로, KRX 공식 데이터 포털의 **투자자별 매매동향**을 다이렉트로 긁어오는 `pykrx` 라이브러리를 호출합니다.
*   단순 매수 "수량"이 아닌 `(매수 수량 × 현재 종가)`로 환산하여, **정확히 얼마의 현금이 유입되었는지 매수 "대금"**을 도출합니다.
*   외국인, 기관, 연기금, 투신 4개 팩터 중 2개 이상의 세력이 각각 '1억 원 이상' 매집한 진짜 종목만 최종 선별합니다.

## 📤 3. 결과 자동 리포팅

*   최종 통과한 종목(보통 코스피/코스닥 합쳐 5~10% 미만의 비율)은 `gspread`를 통해 Google SpreadSheet의 **`진짜매집_KOSPI / 진짜매집_KOSDAQ`** 탭에 자동으로 업데이트됩니다.
*   시트에서는 `외국인(5.2억) / 투신(1.1억)` 과 같이 직관적인 현금 유입 단위로 확인할 수 있어, 추가적인 HTS/MTS 확인 소요를 덜어줍니다.
